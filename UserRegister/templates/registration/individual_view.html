{% extends 'base.html' %}

{% load widget_tweaks %}
{% load static %}

{% block content %}

<div class="row">
    <div class="col-6 mx-auto">
        <form id="msform" method="post">
            {% csrf_token %}
            {% if messages %}
            {% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% endif %}


            <ul id="progressbar" class="mx-auto text-center" style="padding-left: 0px;">
                <li class="active" id="step1">Personal Details</li>
                <li id="step2">Location Details</li>
                <li id="step3">Sports Choices</li>
            </ul>

            <fieldset class="p-2" id="tab-1">
                <div class="card shadow">
                    <h4 class="card-header text-white text-center"
                        style="background: linear-gradient(170deg, rgba(71,176,239,1) 35%, rgba(13,223,246,1) 100%);">
                        Tell us little
                        about you</h4>
                    <div class="card-body">
                        <div class="form-row p-2">
                            <input type="text" class="form-control" name="first_name" placeholder="First Name"
                                   value="{% if individual.first_name %} {{individual.first_name}} {% else %} None {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <input type="text" class="form-control" name="last_name" placeholder="Last Name"
                                   value="{% if individual.last_name %} {{individual.last_name}} {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <input placeholder="DOB" class="textbox-n form-control" type="text"
                                   onfocus="(this.type='date')" onblur="(this.type='text')" name="dob"
                                   value="{% if individual.dob %} {{individual.dob}} {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <input type="text" class="form-control" name="contact_email" placeholder="Contact Email"
                            value="{% if individual.email %} {{individual.email}} {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <input type="text" class="form-control" name="mobile" placeholder="Mobile"
                            value="{% if individual.phone %} {{individual.phone}} {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <input type="text" class="form-control" name="provider" placeholder="Provider"
                            value="{% if individual.provider %} {{individual.provider}} {% endif %}"/>
                        </div>
                        <div class="form-row p-2">
                            <label>I am interest in participating in ?</label>
                            <input type="radio" id="Male" name="interest_gender" value="Male"
                            {% if individual.participation_interest == "Male" %} checked {% endif %}>Male</input>
                            <input type="radio" id="Female" name="interest_gender" value="Female"
                            {% if individual.participation_interest == "Female" %} checked {% endif %}> Female </input>
                            <input type="radio" id="Coed" name="interest_gender" value="Coed"
                            {% if individual.participation_interest == "Coed" %} checked {% endif %}> Coed </input>
                        </div>
                        <div class="form-row p-2">
                            <label>Have you ever suffered concussion?</label>
                            <input type="radio" id="Yes" name="is_concussion" value="Yes"
                            {% if individual.concussion == "Yes" %} checked {% endif %}>Yes</input>
                            <input type="radio" id="No" name="is_concussion" value="No"
                            {% if individual.concussion == "No" %} checked {% endif %}> No</input>
                        </div>

                        <div class="form-row p-2 text-center">
                            <input type="button" name="next" class="next action-button btn btn-primary"
                                   value="Next" id="next-tab-1"/>
                        </div>
                    </div>
                </div>

            </fieldset>

            <fieldset class="p-2" id="tab-2">
                <div class="card shadow">
                    <h4 class="card-header text-white text-center"
                        style="background: linear-gradient(170deg, rgba(71,176,239,1) 35%, rgba(13,223,246,1) 100%);">
                        Hey {{ user.first_name }} list your locations where you can participate in </h4>
                    <label></label>
                    <div class="form-row p-2">
                        <input type="text" class="form-control" name="city" placeholder="City"
                               value="{% if individual.city %} {{individual.city}} {% endif %}"/>
                    </div>
                    <div class="form-row p-2">
                        <input type="text" class="form-control" name="province" placeholder="Province"
                               value="{% if individual.province %} {{individual.province}} {% endif %}"/>
                    </div>
                    <div class="form-row p-2">
                        <input type="text" class="form-control" name="Country" placeholder="Country"
                               value="{% if individual.country %} {{individual.country}} {% endif %}"/>
                    </div>
                    <div class="form-row p-2 text-center">
                        <div id="input_fields_wrap">
                            <button class="btn btn-primary"
                                    id="add_field_button">Add location
                            </button>
                        </div>
                    </div>
                    <div class="form-row p-2 text-center">
                        <input type="button" name="previous"
                               class="previous action-button-previous btn btn-primary"
                               value="Previous" id="previous-tab-2"/>
                        <input type="button" name="next" class="next action-button btn btn-primary"
                               value="Next" id="next-tab-2"/>
                    </div>
                </div>
            </fieldset>

            <fieldset class="p-2" id="tab-3">
                <div class="card shadow">
                    <h4 class="card-header text-white text-center"
                        style="background: linear-gradient(170deg, rgba(71,176,239,1) 35%, rgba(13,223,246,1) 100%);">
                        {{user.first_name }} ,
                        add sports you love to play and the ones you would love to play</h4>
                    <div class="card-body">
                        <div class="form-row p-2">
                            <select name='sport_category' id="category" class="form-select"
                                    aria-label=".form-select-lg example">
                                <option selected> Choose Sport Category</option>
                                {% for sc in sports_category %}
                                    <option value="{{sc}}">{{sc}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-row p-2">
                            <select name='sport_type' id="sports" class="form-select"
                                    aria-label=".form-select-lg example">
                                <option value="" selected>Choose Sport Type</option>
                            </select>
                        </div>
                        <div class="form-row p-2">
                            <select name='position' class="form-select"
                                    aria-label=".form-select-lg example">
                                <option value=""
                                        {% if individual.sports_position == "" %} selected {% endif %}>
                                Choose position</option>
                                <option value="Athelete"
                                        {% if individual.sports_position == "Athelete" %} selected {% endif %}>
                                Athelete</option>
                                <option value="Coach"
                                        {% if individual.sports_position == "Coach" %} selected {% endif %}>
                                Coach</option>
                                <option value="Attendee"
                                        {% if individual.sports_position == "Attendee" %} selected {% endif %}>
                                Attendee</option>
                            </select>
                        </div>
                        <div class="form-row p-2">
                            <select name='skill' class="form-select"
                                    aria-label=".form-select-lg example">
                                <option value="" selected>Choose Skill</option>
                                <option value="Rookie"
                                        {% if individual.sports_skill == "Attendee" %} selected {% endif %}>
                                Rookie</option>
                                <option value="Recreational"
                                        {% if individual.sports_skill == "Recreational" %} selected {% endif %}>
                                Recreational</option>
                                <option value="Competitive"
                                        {% if individual.sports_skill == "Competitive" %} selected {% endif %}>
                                Competitive</option>
                                <option value="Pro-Bound"
                                        {% if individual.sports_skill == "Pro-Bound" %} selected {% endif %}>
                                Pro-Bound</option>
                            </select>
                        </div>
                        <div class="form-row p-2 text-center">
                            <div id="input_fields">
                                <button class="btn btn-primary"
                                        id="add_button">Add Position
                                </button>
                            </div>
                        </div>
                        <div class="form-row p-2 text-center">
                            <input type="button" name="previous"
                                   class="previous action-button-previous btn btn-primary"
                                   value="Previous" id="previous-tab-3"/>

                            <input type="submit" name="submit" class="submit action-button btn btn-primary"
                                   value="Submit"/>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>


    </div>
</div>


<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>

<style>

   #progressbar {
    margin-bottom: 30px;
    overflow: hidden;
    color: lightgrey
}

#progressbar .active {
    color: #ff6f3d;
}

#progressbar li {
    display:inline-block;
    list-style-type: none;
    font-size: 15px;
    width: 25%;
    position: relative;
    font-weight: 400
}

#progressbar #step1:before {
    content: "1"
}

#progressbar #step2:before {
    content: "2"
}

#progressbar #step3:before {
    content: "3"
}

#progressbar li:before {
    width: 50px;
    height: 50px;
    line-height: 45px;
    display: block;
    font-size: 20px;
    color: #ffffff;
    background: lightgray;
    border-radius: 50%;
    margin: 0 auto 10px auto;
    padding: 2px
}

#progressbar li.active:before,
#progressbar li.active:after {
    background: #ff6f3d
}




</style>

<script>


$(document).ready(function(){
  var tab2 = $("#tab-2");
  var tab3 = $("#tab-3");
  tab2.hide();
  tab3.hide();

  $("#next-tab-1").click(function(){
    var tab1 = $("#tab-1");
    var tab2 = $("#tab-2");
    var tab3 = $("#tab-3");
    tab1.hide();
    tab2.show();
    tab3.hide();
    $("#step2").addClass("active");
  });

  $("#next-tab-2").click(function(){
    var tab1 = $("#tab-1");
    var tab2 = $("#tab-2");
    var tab3 = $("#tab-3");
    tab1.hide();
    tab2.hide();
    tab3.show();
    $("#step3").addClass("active");
  });

  $("#previous-tab-2").click(function(){
    var tab1 = $("#tab-1");
    var tab2 = $("#tab-2");
    var tab3 = $("#tab-3");
    tab1.show();
    tab2.hide();
    tab3.hide();
    $("#step2").removeClass("active");
  });

  $("#previous-tab-3").click(function(){
    var tab1 = $("#tab-1");
    var tab2 = $("#tab-2");
    var tab3 = $("#tab-3");
    tab1.hide();
    tab2.show();
    tab3.hide();
    $("#step3").removeClass("active");
  });

});

$("#category").change(function () {
        var selected_category_value = $("#category option:selected");
        var selected_category_text = selected_category_value.text();
        $.ajax({
            type: "POST",
            url: '{% url "get_selected_sports_type" %}',
            data: {
                'selected_category_text': selected_category_text,
                'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
            },
            success: function (data) {
                let html_data = '';
                data.forEach(function (data) {
                    html_data += `<option value="${data.sports_type_text}">${data.sports_type_text}</option>`
                });
                $("#sports").html(html_data);
            }
        });
    });


    $(document).ready(function() {
    var max_fields      = 10; //maximum input boxes allowed
    var wrapper         = $("#input_fields_wrap"); //Fields wrapper
    var add_button      = $("#add_field_button"); //Add button ID

    var x = 1; //initlal text box count


   $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed

             //text box increment
            $(wrapper).append('<div><input name="city" class="form-control" type="text" placeholder = "City"><input type="text" class="form-control" name ="province" placeholder="Province"><input type="text" class="form-control" name="country" placeholder= "Country"><a href="#" class="remove_field">Remove</a></div>'); //add input box
            x++;
      }
    });

    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text

        e.preventDefault();
        $(this).parent('div').remove();
        x--;
    })
});

    $(document).ready(function() {
    var max_fields      = 10; //maximum input boxes allowed
    var wrapper         = $("#input_fields"); //Fields wrapper
    var add_button      = $("#add_button"); //Add button ID

    var x = 1; //initlal text box count


   $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed

             //text box increment
            $(wrapper).append('<div><select name="sport_category" id="category" class="form-select" aria-label=".form-select-lg example"><option selected disabled>Choose Sport Category</option></select><select name="sport_types" id="sports" class="form-select" aria-label=".form-select-lg example"><option selected disabled>Choose Sport Type</option></select><select name="position" class="form-select" aria-label=".form-select-lg example"><option selected disabled>Choose position</option><option>Athelete</option><option>Coach</option><option>Attendee</option><a href="#" class="remove_field">Remove</a></div>'); //add input box
            x++;
      }
    });

    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text

        e.preventDefault();
        $(this).parent('div').remove();
        x--;
    })
});


$(function() {
  $('input[name="datetimes"]').daterangepicker({
    timePicker: true,
    startDate: moment().startOf('hour'),
    endDate: moment().startOf('hour').add(32, 'hour'),
    locale: {
      format: 'MM/DD/YYYY hh:mm A'
    }
  });
});


$(function () {
        $("input[name='event_cost']").click(function () {
            if ($("#chkYes").is(":checked")) {
                $("#dvPassport").show();
            } else {
                $("#dvPassport").hide();
            }
        });
    });
$(function () {
        $("input[name='position_price']").click(function () {
            if ($("#chkYes1").is(":checked")) {
                $("#dvPassport1").show();
            } else {
                $("#dvPassport1").hide();
            }
        });
    });

$('.radio').change(function() {
  $('#custom_amount').prop('disabled', !$(this).is('.other'));
});







</script>

{% endblock %}